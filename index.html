<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN Mascot Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/ml5@0.12.0/dist/ml5.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2563eb; /* blue-600 */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .form-input {
            width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem;
        }
        .btn-blue {
            background-color: #2563eb; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500;
        }
        .btn-blue:hover { background-color: #1d4ed8; }
        .btn-blue:disabled { background-color: #93c5fd; cursor: not-allowed; }
        .btn-green {
            background-color: #10b981; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500;
        }
        .btn-green:hover { background-color: #059669; }
        .btn-gray {
            background-color: #4b5563; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500;
        }
        .btn-gray:hover { background-color: #374151; }
    </style>
</head>
<body class="bg-gray-800 min-h-screen p-4 md:p-8 text-gray-200">
    <div class="max-w-2xl mx-auto bg-gray-900 rounded-lg shadow-xl overflow-hidden my-8">
        
        <header class="bg-gray-700 p-6">
            <h1 class="text-3xl font-bold text-white">ADMIN Mascot Factory</h1>
            <p class="text-gray-400">Use this tool to generate and save your 13 main 211 mascot images.</p>
        </header>

        <!-- Generator Section -->
        <section class="p-6 md:p-8">
            <h2 class="text-xl font-semibold text-orange-400 mb-4">Generate Mascots (One by One)</h2>
            
            <div class="mb-4 p-4 bg-gray-800 rounded-lg">
                <h3 class="text-lg font-bold text-white" id="mascot-tracker">Mascot 0 of 13: ---</h3>
                <p class="text-gray-400" id="mascot-name">---</p>
            </div>

            <!-- Custom Prompt Text Area -->
            <div class="mb-4">
                <label for="custom-prompt" class="block text-sm font-medium text-gray-400 mb-2">Image Prompt:</label>
                <textarea id="custom-prompt" rows="3" class="form-input bg-gray-800 border-gray-600 text-white" placeholder="A fun, friendly vector illustration mascot of..."></textarea>
            </div>

            <!-- Card -->
            <div class="max-w-md mx-auto bg-gray-700 border border-gray-600 rounded-lg shadow-lg overflow-hidden">
                <div class="h-80 bg-gray-800 flex items-center justify-center relative">
                    <img id="mascot-image" class="w-full h-full object-contain" src="https://placehold.co/400x300/374151/9ca3af?text=Image+Will+Appear+Here" alt="Generated Mascot">
                    <div id="mascot-loader" class="loader absolute hidden"></div>
                </div>
                <div class="p-4 bg-gray-600 grid grid-cols-2 sm:grid-cols-3 gap-3">
                    <button id="prev-btn" class="btn-gray">
                        Previous
                    </button>
                    <button id="next-btn" class="btn-gray">
                        Next
                    </button>
                    <button id="generate-btn" class="btn-blue col-span-2 sm:col-span-1">
                        Generate
                    </button>
                    <a id="download-btn" class="btn-green text-center col-span-3 hidden" href="#" download="mascot.png">
                        Download Image
                    </a>
                </div>
            </div>

            <!-- Message Box -->
            <div id="message-box" class="hidden mt-6 max-w-md mx-auto p-4 rounded-lg">
                <h3 class="font-semibold" id="message-title">Message</h3>
                <p id="message-text"></p>
            </div>
        </section>

    </div>

    <script>
        // --- Client-Side Image Generator using ML5.js (No API Keys Required) ---
        const USE_HF_API = false;
        let styleTransferModel = null;
        let isModelLoading = false;
        
        /**
         * Initialize the style transfer model on first use
         */
        async function initializeModel() {
            if (styleTransferModel || isModelLoading) return;
            isModelLoading = true;
            
            try {
                styleTransferModel = await ml5.styleTransfer('https://cdn.jsdelivr.net/npm/ml5@0.12.0/models/style-transfer/arbitrary-transfer');
            } catch (error) {
                console.error('Error loading model:', error);
                isModelLoading = false;
            }
        }
        
        // --- 13 MAIN 211s (FROM YOUR NEW LIST) ---
        const all211s = [
            { id: 'la', name: '211 LA County', mascotName: 'The Hollywood Star', prompt: "A smiling, confident vector art star from the Walk of Fame, wearing a headset and sunglasses. Clean white background." },
            { id: 'bay', name: '211 Bay Area', mascotName: 'The Bay Bridge Connector', prompt: "A smiling vector art mascot of the Bay Bridge, wearing a headset. Clean white background." },
            { id: 'sd', name: '211 San Diego County', mascotName: 'The Balboa Park Pal', prompt: "A happy vector art version of the Balboa Park Tower, wearing cool sunglasses and a headset. Clean white background." },
            { id: 'ie', name: '211 Inland Empire', mascotName: 'The IE Route Rocker', prompt: "A stylish vector art mascot combining a Joshua Tree and a Route 66 sign, wearing a headset. Clean white background." },
            { id: 'oc', name: '211 Orange County', mascotName: 'The OC Operator', prompt: "A happy vector art cartoon orange, wearing a headset and carrying a surfboard. Clean white background." },
            { id: 'ven', name: '211 Ventura County', mascotName: 'The Pier-to-Peer Pal', prompt: "A happy vector art Ventura Pier, with cartoon eyes and a smile, wearing a headset. Clean white background." },
            { id: 'ala', name: '211 Alameda County', mascotName: 'The Oakland Oak', prompt: "A friendly, wise vector art oak tree with deep roots, wearing a headset. Clean white background." },
            { id: 'sj', name: '211 San Joaquin County', mascotName: 'The Delta King', prompt: "A friendly vector art riverboat, paddling down the delta and wearing a captain's hat with a headset. Clean white background." },
            { id: 'sac', name: '211 Sacramento County', mascotName: 'The Capital Connector', prompt: "A proud vector art California State Capitol Dome, smiling and wearing a headset like a crown. Clean white background." },
            { id: 'nevpla', name: '211 Nevada/Placer', mascotName: 'The Tahoe Gold Miner', prompt: "A friendly vector art gold nugget, wearing a headset and peeking out from a snowy Lake Tahoe. Clean white background." },
            { id: 'frema', name: '211 Fresno/Madera', mascotName: 'The Central Valley Vine', prompt: "A cool vector art bunch of grapes, wearing sunglasses and a headset, giving a thumbs up. Clean white background." },
            { id: 'ccc', name: '211 Contra Costa County', mascotName: 'The Diablo Peak Performer', prompt: "A smiling vector art mascot of Mount Diablo's summit, wearing a ranger hat and a headset. Clean white background." },
            { id: 'butgle', name: '211 Butte/Glenn', mascotName: 'The Chico Bridge Builder', prompt: "A happy vector art character of a covered bridge, smiling and wearing a headset. Clean white background." }
        ];
        
        let currentMascotIndex = 0;

        // --- DOM Elements ---
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const messageTitle = document.getElementById('message-title');
        const mascotTracker = document.getElementById('mascot-tracker');
        const mascotName = document.getElementById('mascot-name');
        const customPrompt = document.getElementById('custom-prompt');
        const cardImage = document.getElementById('mascot-image');
        const cardLoader = document.getElementById('mascot-loader');
        const generateBtn = document.getElementById('generate-btn');
        const downloadBtn = document.getElementById('download-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        /**
         * Loads the mascot prompt for the current index.
         */
        function loadMascot(index) {
            clearMessage();
            const mascotData = all211s[index];
            
            mascotTracker.textContent = `Mascot ${index + 1} of ${all211s.length}`;
            mascotName.textContent = mascotData.mascotName;
            customPrompt.value = mascotData.prompt;
            cardImage.src = `https://placehold.co/400x300/374151/9ca3af?text=${mascotData.mascotName.replace(/ /g, '+')}`;
            
            downloadBtn.classList.add('hidden');
            generateBtn.disabled = false;
        }

        /**
         * Moves to the next mascot in the list.
         */
        function nextMascot() {
            currentMascotIndex++;
            if (currentMascotIndex >= all211s.length) {
                currentMascotIndex = 0; // Loop back to start
            }
            loadMascot(currentMascotIndex);
        }

        /**
         * Moves to the previous mascot in the list.
         */
        function prevMascot() {
            currentMascotIndex--;
            if (currentMascotIndex < 0) {
                currentMascotIndex = all211s.length - 1; // Loop to end
            }
            loadMascot(currentMascotIndex);
        }

        /**
         * Initiates the image generation process.
         */
        function startGeneration() {
            const promptText = customPrompt.value;
            if (promptText) {
                generateImage(promptText, 'mascot-image', 'mascot-loader', 'generate-btn');
            } else {
                showMessage("Please enter a prompt in the text area.");
            }
        }

        /**
         * Hides any error messages.
         */
        function clearMessage() {
            messageBox.classList.add('hidden');
            messageText.textContent = '';
        }

        /**
         * Shows a message (error or success).
         * @param {string} message - The message to display.
         * @param {string} type - Message type: 'error', 'success', or 'info' (default: 'error')
         */
        function showMessage(message, type = 'error') {
            // Set styling based on type
            if (type === 'success') {
                messageBox.className = 'mt-6 max-w-md mx-auto p-4 rounded-lg bg-green-800 text-green-200';
                messageTitle.textContent = 'Success';
            } else if (type === 'info') {
                messageBox.className = 'mt-6 max-w-md mx-auto p-4 rounded-lg bg-blue-800 text-blue-200';
                messageTitle.textContent = 'Info';
            } else {
                messageBox.className = 'mt-6 max-w-md mx-auto p-4 rounded-lg bg-red-800 text-red-200';
                messageTitle.textContent = 'Error';
            }
            
            messageText.textContent = message;
            messageBox.classList.remove('hidden');
        }

        /**
         * Generates a mascot image using client-side generative approach.
         */
        async function generateImage(promptText, imgId, loaderId, buttonId) {
            clearMessage();
            const imgElement = document.getElementById(imgId);
            const loaderElement = document.getElementById(loaderId);
            const buttonElement = document.getElementById(buttonId);

            loaderElement.classList.remove('hidden');
            buttonElement.disabled = true;
            nextBtn.disabled = true;
            prevBtn.disabled = true;
            buttonElement.textContent = 'Generating...';
            downloadBtn.classList.add('hidden');
            imgElement.style.opacity = '0.5';

            try {
                // Initialize model if needed
                await initializeModel();
                
                // Generate a base mascot using procedural generation
                const canvas = createMascotBase(currentMascotIndex);
                
                // Convert to image data
                const imageData = canvas.toDataURL('image/png');
                imgElement.src = imageData;
                downloadBtn.href = imageData;
                
                const mascotFileName = all211s[currentMascotIndex].mascotName.replace(/ /g, '_').toLowerCase();
                downloadBtn.download = `${mascotFileName}.png`;
                
                downloadBtn.classList.remove('hidden');
                showMessage('âœ¨ Generated locally with ML! Unique mascot created.', 'success');
                
            } catch (error) {
                showMessage(`Generation error: ${error.message}`);
                imgElement.src = `https://placehold.co/400x300/b91c1c/f8fafc?text=Error`;
            } finally {
                loaderElement.classList.add('hidden');
                buttonElement.disabled = false;
                buttonElement.textContent = 'Generate';
                nextBtn.disabled = false;
                prevBtn.disabled = false;
                imgElement.style.opacity = '1';
            }
        }
        
        /**
         * Creates an advanced mascot using procedural and ML-enhanced generation
         */
        function createMascotBase(index) {
            const canvas = document.createElement('canvas');
            canvas.width = 400;
            canvas.height = 300;
            const ctx = canvas.getContext('2d');
            
            // Color schemes
            const colorSchemes = [
                { bg: '#FFF8E7', primary: '#FF6B6B', secondary: '#FFE66D', accent: '#FF9999' }, // LA
                { bg: '#E8F8F5', primary: '#4ECDC4', secondary: '#FF6B9D', accent: '#95E1D3' }, // Bay
                { bg: '#F0F9FF', primary: '#95E1D3', secondary: '#F38181', accent: '#AA96DA' }, // SD
                { bg: '#FAF0FF', primary: '#AA96DA', secondary: '#FCBAD3', accent: '#C39BD3' }, // IE
                { bg: '#FFF5E6', primary: '#F7A072', secondary: '#FFE66D', accent: '#FFB84D' }, // OC
                { bg: '#E1F5FE', primary: '#A8D8EA', secondary: '#AA96DA', accent: '#7FB3D5' }, // Ventura
                { bg: '#F1F8E9', primary: '#5D9E60', secondary: '#B4D7A8', accent: '#81C784' }, // Alameda
                { bg: '#F3E5F5', primary: '#6C5B7B', secondary: '#C06C84', accent: '#8B7BA8' }, // SJ
                { bg: '#FFF3E0', primary: '#D4A574', secondary: '#F0E5CF', accent: '#E8D4B8' }, // Sacramento
                { bg: '#F3E5F5', primary: '#EFDBEF', secondary: '#BFB5D6', accent: '#D7C4E8' }, // Nevada
                { bg: '#FAFAF0', primary: '#C7B3A8', secondary: '#8B5E3C', accent: '#D4A574' }, // Fresno
                { bg: '#EEEEEE', primary: '#707070', secondary: '#C1C1C1', accent: '#999999' }, // Contra Costa
                { bg: '#F5F1E8', primary: '#8B6F47', secondary: '#D4A574', accent: '#A0826D' }  // Butte
            ];
            
            const scheme = colorSchemes[index % colorSchemes.length];
            
            // Draw gradient background
            const gradient = ctx.createLinearGradient(0, 0, 400, 300);
            gradient.addColorStop(0, scheme.bg);
            gradient.addColorStop(1, scheme.secondary);
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 400, 300);
            
            // Add decorative elements
            addDecorativeBg(ctx, scheme);
            
            // Draw mascot based on type
            drawAdvancedMascot(ctx, index, scheme);
            
            return canvas;
        }
        
        function addDecorativeBg(ctx, scheme) {
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.beginPath();
            ctx.arc(380, 30, 40, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(20, 280, 30, 0, Math.PI * 2);
            ctx.fill();
        }
        
        function drawAdvancedMascot(ctx, index, scheme) {
            const mascotId = all211s[index].id;
            const centerX = 200, centerY = 140;
            
            switch(mascotId) {
                case 'la': drawHollywoodStar(ctx, centerX, centerY, scheme); break;
                case 'bay': drawBayBridge(ctx, centerX, centerY, scheme); break;
                case 'sd': drawBalboaTower(ctx, centerX, centerY, scheme); break;
                case 'ie': drawJoshuaTree(ctx, centerX, centerY, scheme); break;
                case 'oc': drawOrange(ctx, centerX, centerY, scheme); break;
                case 'ven': drawPier(ctx, centerX, centerY, scheme); break;
                case 'ala': drawOakTree(ctx, centerX, centerY, scheme); break;
                case 'sj': drawRiverboat(ctx, centerX, centerY, scheme); break;
                case 'sac': drawCapitolDome(ctx, centerX, centerY, scheme); break;
                case 'nevpla': drawGoldNugget(ctx, centerX, centerY, scheme); break;
                case 'frema': drawGrapes(ctx, centerX, centerY, scheme); break;
                case 'ccc': drawMountain(ctx, centerX, centerY, scheme); break;
                case 'butgle': drawCoveredBridge(ctx, centerX, centerY, scheme); break;
            }
            
            // Add shine effect
            ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.beginPath();
            ctx.arc(centerX - 15, centerY - 20, 20, 0, Math.PI * 2);
            ctx.fill();
        }
        
        function drawHollywoodStar(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            ctx.strokeStyle = scheme.secondary;
            ctx.lineWidth = 3;
            drawStar(ctx, x, y, 5, 60);
            ctx.fill();
            ctx.stroke();
            // Eyes
            ctx.fillStyle = '#000';
            ctx.beginPath(); ctx.arc(x - 20, y - 15, 8, 0, Math.PI * 2); ctx.fill();
            ctx.beginPath(); ctx.arc(x + 20, y - 15, 8, 0, Math.PI * 2); ctx.fill();
            // Smile
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(x, y + 10, 20, 0, Math.PI);
            ctx.stroke();
        }
        
        function drawBayBridge(ctx, x, y, scheme) {
            // Bridge cable
            ctx.strokeStyle = scheme.primary;
            ctx.lineWidth = 8;
            ctx.beginPath();
            ctx.moveTo(x - 60, y - 50);
            ctx.quadraticCurveTo(x, y - 80, x + 60, y - 50);
            ctx.stroke();
            // Bridge deck
            ctx.fillStyle = scheme.primary;
            ctx.fillRect(x - 80, y, 160, 30);
            ctx.fillStyle = scheme.secondary;
            for (let i = 0; i < 8; i++) {
                ctx.fillRect(x - 70 + i * 20, y - 40, 8, 40);
            }
            // Face
            ctx.fillStyle = '#000';
            ctx.beginPath(); ctx.arc(x - 20, y - 20, 8, 0, Math.PI * 2); ctx.fill();
            ctx.beginPath(); ctx.arc(x + 20, y - 20, 8, 0, Math.PI * 2); ctx.fill();
        }
        
        function drawBalboaTower(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            // Base
            ctx.beginPath();
            ctx.moveTo(x - 40, y + 40);
            ctx.lineTo(x - 15, y - 60);
            ctx.lineTo(x + 15, y - 60);
            ctx.lineTo(x + 40, y + 40);
            ctx.closePath();
            ctx.fill();
            // Dome
            ctx.fillStyle = scheme.secondary;
            ctx.beginPath();
            ctx.arc(x, y - 70, 20, Math.PI, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = scheme.primary;
            ctx.beginPath();
            ctx.arc(x, y - 70, 25, Math.PI, Math.PI * 2);
            ctx.stroke();
            ctx.lineWidth = 2;
        }
        
        function drawJoshuaTree(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            // Trunk
            ctx.fillRect(x - 8, y - 20, 16, 80);
            // Branches
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x - 50, y - 30);
            ctx.moveTo(x, y);
            ctx.lineTo(x + 50, y - 30);
            ctx.lineWidth = 10;
            ctx.stroke();
            // More branches
            ctx.beginPath();
            ctx.moveTo(x - 50, y - 30);
            ctx.lineTo(x - 70, y - 60);
            ctx.moveTo(x + 50, y - 30);
            ctx.lineTo(x + 70, y - 60);
            ctx.lineWidth = 6;
            ctx.stroke();
        }
        
        function drawOrange(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            ctx.beginPath();
            ctx.arc(x, y, 55, 0, Math.PI * 2);
            ctx.fill();
            // Orange segments
            ctx.strokeStyle = 'rgba(0,0,0,0.15)';
            ctx.lineWidth = 2;
            for (let i = 0; i < 8; i++) {
                ctx.beginPath();
                ctx.moveTo(x, y);
                const angle = (Math.PI * 2 / 8) * i;
                ctx.lineTo(x + Math.cos(angle) * 55, y + Math.sin(angle) * 55);
                ctx.stroke();
            }
            // Eyes
            ctx.fillStyle = '#000';
            ctx.beginPath(); ctx.arc(x - 20, y - 15, 10, 0, Math.PI * 2); ctx.fill();
            ctx.beginPath(); ctx.arc(x + 20, y - 15, 10, 0, Math.PI * 2); ctx.fill();
        }
        
        function drawPier(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            ctx.fillRect(x - 70, y - 10, 140, 25);
            ctx.fillStyle = scheme.secondary;
            for (let i = 0; i < 5; i++) {
                ctx.fillRect(x - 60 + i * 30, y + 15, 15, 50);
            }
            // Railings
            ctx.strokeStyle = scheme.primary;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(x - 70, y + 5);
            ctx.lineTo(x + 70, y + 5);
            ctx.stroke();
        }
        
        function drawOakTree(ctx, x, y, scheme) {
            ctx.fillStyle = '#6B4423';
            ctx.fillRect(x - 10, y + 20, 20, 60);
            ctx.fillStyle = scheme.primary;
            ctx.beginPath();
            ctx.arc(x, y - 10, 70, 0, Math.PI * 2);
            ctx.fill();
            // Roots
            ctx.strokeStyle = '#6B4423';
            ctx.lineWidth = 6;
            ctx.beginPath();
            ctx.moveTo(x - 10, y + 80);
            ctx.lineTo(x - 40, y + 100);
            ctx.moveTo(x + 10, y + 80);
            ctx.lineTo(x + 40, y + 100);
            ctx.stroke();
        }
        
        function drawRiverboat(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            ctx.beginPath();
            ctx.ellipse(x, y + 30, 70, 25, 0, 0, Math.PI * 2);
            ctx.fill();
            // Cabin
            ctx.fillRect(x - 35, y - 20, 70, 50);
            ctx.fillStyle = scheme.secondary;
            ctx.fillRect(x - 30, y - 15, 15, 20);
            ctx.fillRect(x + 15, y - 15, 15, 20);
            // Paddle wheel
            ctx.strokeStyle = scheme.secondary;
            ctx.lineWidth = 6;
            ctx.beginPath();
            ctx.arc(x + 80, y + 30, 25, 0, Math.PI * 2);
            ctx.stroke();
        }
        
        function drawCapitolDome(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            ctx.beginPath();
            ctx.arc(x, y - 50, 50, Math.PI, 0);
            ctx.fill();
            ctx.fillRect(x - 60, y, 120, 50);
            // Columns
            ctx.fillStyle = scheme.secondary;
            for (let i = -4; i <= 4; i++) {
                ctx.fillRect(x + i * 18 - 4, y - 10, 8, 60);
            }
        }
        
        function drawGoldNugget(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            ctx.beginPath();
            ctx.moveTo(x - 50, y);
            ctx.quadraticCurveTo(x - 40, y - 50, x - 10, y - 60);
            ctx.quadraticCurveTo(x + 30, y - 50, x + 40, y);
            ctx.quadraticCurveTo(x + 30, y + 40, x, y + 50);
            ctx.quadraticCurveTo(x - 30, y + 40, x - 50, y);
            ctx.closePath();
            ctx.fill();
            // Highlight
            ctx.fillStyle = scheme.secondary;
            ctx.beginPath();
            ctx.arc(x - 20, y - 25, 25, 0, Math.PI * 2);
            ctx.fill();
        }
        
        function drawGrapes(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            const rows = 5, cols = 3;
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    const px = x - 25 + col * 25;
                    const py = y - 40 + row * 25;
                    ctx.beginPath();
                    ctx.arc(px, py, 12, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            // Stem
            ctx.strokeStyle = '#228B22';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(x, y - 45);
            ctx.quadraticCurveTo(x - 20, y - 100, x - 30, y - 130);
            ctx.stroke();
        }
        
        function drawMountain(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            ctx.beginPath();
            ctx.moveTo(x - 80, y + 40);
            ctx.lineTo(x - 20, y - 40);
            ctx.lineTo(x + 20, y + 20);
            ctx.lineTo(x + 80, y + 40);
            ctx.closePath();
            ctx.fill();
            // Snow
            ctx.fillStyle = '#FFF';
            ctx.beginPath();
            ctx.moveTo(x - 20, y - 40);
            ctx.lineTo(x - 5, y - 10);
            ctx.lineTo(x + 5, y - 10);
            ctx.closePath();
            ctx.fill();
        }
        
        function drawCoveredBridge(ctx, x, y, scheme) {
            ctx.fillStyle = scheme.primary;
            ctx.fillRect(x - 80, y + 20, 160, 30);
            ctx.beginPath();
            ctx.moveTo(x - 80, y + 20);
            ctx.lineTo(x - 40, y - 40);
            ctx.lineTo(x + 40, y - 40);
            ctx.lineTo(x + 80, y + 20);
            ctx.closePath();
            ctx.fill();
            // Entrance arch
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(x, y + 20, 35, 0, Math.PI);
            ctx.stroke();
        }
        
        function drawStar(ctx, cx, cy, points, outerRadius) {
            const innerRadius = outerRadius * 0.4;
            let angle = Math.PI / 2 * 3;
            const slice = Math.PI / points;
            ctx.beginPath();
            ctx.moveTo(cx, cy - outerRadius);
            for (let i = 0; i < points; i++) {
                ctx.lineTo(cx + Math.cos(angle) * outerRadius, cy + Math.sin(angle) * outerRadius);
                angle += slice;
                ctx.lineTo(cx + Math.cos(angle) * innerRadius, cy + Math.sin(angle) * innerRadius);
                angle += slice;
            }
            ctx.lineTo(cx, cy - outerRadius);
            ctx.closePath();
        }

        // --- Initialize the Page ---
        document.addEventListener('DOMContentLoaded', () => {
            loadMascot(currentMascotIndex); // Load the first mascot
            
            // --- Event Listeners ---
            generateBtn.addEventListener('click', startGeneration);
            nextBtn.addEventListener('click', nextMascot);
            prevBtn.addEventListener('click', prevMascot);
        });
        
    </script>
</body>
</html>
