<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN Mascot Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2563eb; /* blue-600 */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .form-input {
            width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem;
        }
        .btn-blue {
            background-color: #2563eb; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500;
        }
        .btn-blue:hover { background-color: #1d4ed8; }
        .btn-blue:disabled { background-color: #93c5fd; cursor: not-allowed; }
        .btn-green {
            background-color: #10b981; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500;
        }
        .btn-green:hover { background-color: #059669; }
        .btn-gray {
            background-color: #4b5563; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500;
        }
        .btn-gray:hover { background-color: #374151; }
    </style>
</head>
<body class="bg-gray-800 min-h-screen p-4 md:p-8 text-gray-200">
    <div class="max-w-2xl mx-auto bg-gray-900 rounded-lg shadow-xl overflow-hidden my-8">
        
        <header class="bg-gray-700 p-6">
            <h1 class="text-3xl font-bold text-white">ADMIN Mascot Factory</h1>
            <p class="text-gray-400">Use this tool to generate and save your 13 main 211 mascot images.</p>
        </header>

        <!-- Generator Section -->
        <section class="p-6 md:p-8">
            <h2 class="text-xl font-semibold text-orange-400 mb-4">Generate Mascots (One by One)</h2>
            
            <div class="mb-4 p-4 bg-gray-800 rounded-lg">
                <h3 class="text-lg font-bold text-white" id="mascot-tracker">Mascot 0 of 13: ---</h3>
                <p class="text-gray-400" id="mascot-name">---</p>
            </div>

            <!-- Custom Prompt Text Area -->
            <div class="mb-4">
                <label for="custom-prompt" class="block text-sm font-medium text-gray-400 mb-2">Image Prompt:</label>
                <textarea id="custom-prompt" rows="3" class="form-input bg-gray-800 border-gray-600 text-white" placeholder="A fun, friendly vector illustration mascot of..."></textarea>
            </div>

            <!-- Card -->
            <div class="max-w-md mx-auto bg-gray-700 border border-gray-600 rounded-lg shadow-lg overflow-hidden">
                <div class="h-80 bg-gray-800 flex items-center justify-center relative">
                    <img id="mascot-image" class="w-full h-full object-contain" src="https://placehold.co/400x300/374151/9ca3af?text=Image+Will+Appear+Here" alt="Generated Mascot">
                    <div id="mascot-loader" class="loader absolute hidden"></div>
                </div>
                <div class="p-4 bg-gray-600 grid grid-cols-2 sm:grid-cols-3 gap-3">
                    <button id="prev-btn" class="btn-gray">
                        Previous
                    </button>
                    <button id="next-btn" class="btn-gray">
                        Next
                    </button>
                    <button id="generate-btn" class="btn-blue col-span-2 sm:col-span-1">
                        Generate
                    </button>
                    <a id="download-btn" class="btn-green text-center col-span-3 hidden" href="#" download="mascot.png">
                        Download Image
                    </a>
                </div>
            </div>

            <!-- Message Box -->
            <div id="message-box" class="hidden mt-6 max-w-md mx-auto p-4 rounded-lg">
                <h3 class="font-semibold" id="message-title">Message</h3>
                <p id="message-text"></p>
            </div>
        </section>

    </div>

    <script>
        // --- Client-Side Image Generator Configuration ---
        const USE_CLIENT_SIDE_GENERATOR = true; // Always use client-side generator
        
        // --- 13 MAIN 211s (FROM YOUR NEW LIST) ---
        const all211s = [
            { id: 'la', name: '211 LA County', mascotName: 'The Hollywood Star', prompt: "A smiling, confident vector art star from the Walk of Fame, wearing a headset and sunglasses. Clean white background." },
            { id: 'bay', name: '211 Bay Area', mascotName: 'The Bay Bridge Connector', prompt: "A smiling vector art mascot of the Bay Bridge, wearing a headset. Clean white background." },
            { id: 'sd', name: '211 San Diego County', mascotName: 'The Balboa Park Pal', prompt: "A happy vector art version of the Balboa Park Tower, wearing cool sunglasses and a headset. Clean white background." },
            { id: 'ie', name: '211 Inland Empire', mascotName: 'The IE Route Rocker', prompt: "A stylish vector art mascot combining a Joshua Tree and a Route 66 sign, wearing a headset. Clean white background." },
            { id: 'oc', name: '211 Orange County', mascotName: 'The OC Operator', prompt: "A happy vector art cartoon orange, wearing a headset and carrying a surfboard. Clean white background." },
            { id: 'ven', name: '211 Ventura County', mascotName: 'The Pier-to-Peer Pal', prompt: "A happy vector art Ventura Pier, with cartoon eyes and a smile, wearing a headset. Clean white background." },
            { id: 'ala', name: '211 Alameda County', mascotName: 'The Oakland Oak', prompt: "A friendly, wise vector art oak tree with deep roots, wearing a headset. Clean white background." },
            { id: 'sj', name: '211 San Joaquin County', mascotName: 'The Delta King', prompt: "A friendly vector art riverboat, paddling down the delta and wearing a captain's hat with a headset. Clean white background." },
            { id: 'sac', name: '211 Sacramento County', mascotName: 'The Capital Connector', prompt: "A proud vector art California State Capitol Dome, smiling and wearing a headset like a crown. Clean white background." },
            { id: 'nevpla', name: '211 Nevada/Placer', mascotName: 'The Tahoe Gold Miner', prompt: "A friendly vector art gold nugget, wearing a headset and peeking out from a snowy Lake Tahoe. Clean white background." },
            { id: 'frema', name: '211 Fresno/Madera', mascotName: 'The Central Valley Vine', prompt: "A cool vector art bunch of grapes, wearing sunglasses and a headset, giving a thumbs up. Clean white background." },
            { id: 'ccc', name: '211 Contra Costa County', mascotName: 'The Diablo Peak Performer', prompt: "A smiling vector art mascot of Mount Diablo's summit, wearing a ranger hat and a headset. Clean white background." },
            { id: 'butgle', name: '211 Butte/Glenn', mascotName: 'The Chico Bridge Builder', prompt: "A happy vector art character of a covered bridge, smiling and wearing a headset. Clean white background." }
        ];
        
        let currentMascotIndex = 0;

        // --- DOM Elements ---
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const messageTitle = document.getElementById('message-title');
        const mascotTracker = document.getElementById('mascot-tracker');
        const mascotName = document.getElementById('mascot-name');
        const customPrompt = document.getElementById('custom-prompt');
        const cardImage = document.getElementById('mascot-image');
        const cardLoader = document.getElementById('mascot-loader');
        const generateBtn = document.getElementById('generate-btn');
        const downloadBtn = document.getElementById('download-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        /**
         * Loads the mascot prompt for the current index.
         */
        function loadMascot(index) {
            clearMessage();
            const mascotData = all211s[index];
            
            mascotTracker.textContent = `Mascot ${index + 1} of ${all211s.length}`;
            mascotName.textContent = mascotData.mascotName;
            customPrompt.value = mascotData.prompt;
            cardImage.src = `https://placehold.co/400x300/374151/9ca3af?text=${mascotData.mascotName.replace(/ /g, '+')}`;
            
            downloadBtn.classList.add('hidden');
            generateBtn.disabled = false;
        }

        /**
         * Moves to the next mascot in the list.
         */
        function nextMascot() {
            currentMascotIndex++;
            if (currentMascotIndex >= all211s.length) {
                currentMascotIndex = 0; // Loop back to start
            }
            loadMascot(currentMascotIndex);
        }

        /**
         * Moves to the previous mascot in the list.
         */
        function prevMascot() {
            currentMascotIndex--;
            if (currentMascotIndex < 0) {
                currentMascotIndex = all211s.length - 1; // Loop to end
            }
            loadMascot(currentMascotIndex);
        }

        /**
         * Initiates the image generation process.
         */
        function startGeneration() {
            const promptText = customPrompt.value;
            if (promptText) {
                generateImage(promptText, 'mascot-image', 'mascot-loader', 'generate-btn');
            } else {
                showMessage("Please enter a prompt in the text area.");
            }
        }

        /**
         * Hides any error messages.
         */
        function clearMessage() {
            messageBox.classList.add('hidden');
            messageText.textContent = '';
        }

        /**
         * Shows a message (error or success).
         * @param {string} message - The message to display.
         * @param {string} type - Message type: 'error', 'success', or 'info' (default: 'error')
         */
        function showMessage(message, type = 'error') {
            // Set styling based on type
            if (type === 'success') {
                messageBox.className = 'mt-6 max-w-md mx-auto p-4 rounded-lg bg-green-800 text-green-200';
                messageTitle.textContent = 'Success';
            } else if (type === 'info') {
                messageBox.className = 'mt-6 max-w-md mx-auto p-4 rounded-lg bg-blue-800 text-blue-200';
                messageTitle.textContent = 'Info';
            } else {
                messageBox.className = 'mt-6 max-w-md mx-auto p-4 rounded-lg bg-red-800 text-red-200';
                messageTitle.textContent = 'Error';
            }
            
            // Handle specific error codes
            if (message.includes("429")) {
                messageText.innerHTML = "<strong>API Limit Reached!</strong><br>The free tier is strict. Please wait 60 seconds and try again.";
            } else if (message.includes("403")) {
                 messageText.innerHTML = "<strong>API Key Error (403)</strong><br>The built-in API key is invalid or disabled.";
            } else {
                messageText.textContent = message;
            }
            messageBox.classList.remove('hidden');
        }

        /**
         * Generates a high-quality cartoon mascot image based on mascot type.
         */
        function generateClientSideImage(mascotData) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 800;
            canvas.height = 600;
            
            // Light background
            ctx.fillStyle = '#f5f5f5';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            const prompt = mascotData.prompt.toLowerCase();
            
            // Route to correct drawing function based on prompt
            if (prompt.includes('star') || prompt.includes('hollywood')) {
                drawHollywoodStar(ctx);
            } else if (prompt.includes('bridge')) {
                drawBayBridge(ctx);
            } else if (prompt.includes('tower') || prompt.includes('balboa')) {
                drawBalboaTower(ctx);
            } else if (prompt.includes('joshua') || prompt.includes('route')) {
                drawJoshuaTree(ctx);
            } else if (prompt.includes('orange')) {
                drawOrangeOC(ctx);
            } else if (prompt.includes('pier')) {
                drawVenturaPier(ctx);
            } else if (prompt.includes('oak')) {
                drawOakland(ctx);
            } else if (prompt.includes('riverboat') || prompt.includes('delta')) {
                drawDeltaKing(ctx);
            } else if (prompt.includes('capitol') || prompt.includes('dome')) {
                drawCapitolConnector(ctx);
            } else if (prompt.includes('gold') || prompt.includes('nugget')) {
                drawTahoeGold(ctx);
            } else if (prompt.includes('grape') || prompt.includes('vine')) {
                drawCentralValleyGrapes(ctx);
            } else if (prompt.includes('diablo') || prompt.includes('mountain')) {
                drawDiabloPeak(ctx);
            } else if (prompt.includes('covered') || prompt.includes('bridge')) {
                drawChicoBridge(ctx);
            } else {
                drawGenericMascot(ctx);
            }
            
            return canvas.toDataURL('image/png');
        }

        // High-quality drawing functions for each mascot
        function drawHollywoodStar(ctx) {
            // Gold star with personality
            const centerX = 400, centerY = 280;
            drawFilledStar(ctx, centerX, centerY, 5, 100, 60, '#FFD700');
            
            // Star outline
            ctx.strokeStyle = '#B8860B';
            ctx.lineWidth = 3;
            drawStarPath(ctx, centerX, centerY, 5, 100, 60);
            ctx.stroke();
            
            // Sunglasses
            ctx.fillStyle = '#000000';
            ctx.fillRect(centerX - 80, centerY - 40, 35, 25);
            ctx.fillRect(centerX + 45, centerY - 40, 35, 25);
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(centerX - 75, centerY - 35, 25, 15);
            ctx.fillRect(centerX + 50, centerY - 35, 25, 15);
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX - 45, centerY - 27);
            ctx.lineTo(centerX + 45, centerY - 27);
            ctx.stroke();
            
            // Face features
            drawFace(ctx, centerX, centerY + 20, true);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX - 5, centerY - 60);
            
            // Sparkles
            drawSparkles(ctx, centerX - 100, centerY - 100, 3);
        }

        function drawBayBridge(ctx) {
            const centerX = 400, centerY = 280;
            
            // Bridge body as main character
            ctx.fillStyle = '#4682B4';
            ctx.fillRect(centerX - 80, centerY - 60, 160, 120);
            
            // Tower outlines
            ctx.strokeStyle = '#1C3A70';
            ctx.lineWidth = 4;
            ctx.strokeRect(centerX - 80, centerY - 60, 160, 120);
            
            // Bridge towers
            ctx.fillStyle = '#1C3A70';
            ctx.fillRect(centerX - 70, centerY - 90, 15, 40);
            ctx.fillRect(centerX + 55, centerY - 90, 15, 40);
            
            // Bridge deck
            ctx.fillStyle = '#5B9BD5';
            ctx.fillRect(centerX - 80, centerY + 20, 160, 20);
            
            // Cables
            ctx.strokeStyle = '#CCCCCC';
            ctx.lineWidth = 2;
            for (let i = 0; i < 6; i++) {
                ctx.beginPath();
                ctx.moveTo(centerX - 70 + i * 30, centerY - 90);
                ctx.lineTo(centerX - 80 + i * 30, centerY + 20);
                ctx.stroke();
            }
            
            // Face on bridge
            drawFace(ctx, centerX, centerY + 10, true);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 80);
            
            // Legs
            ctx.fillStyle = '#4682B4';
            ctx.fillRect(centerX - 40, centerY + 50, 20, 50);
            ctx.fillRect(centerX + 20, centerY + 50, 20, 50);
            ctx.fillStyle = '#333333';
            ctx.fillRect(centerX - 40, centerY + 100, 20, 20);
            ctx.fillRect(centerX + 20, centerY + 100, 20, 20);
        }

        function drawBalboaTower(ctx) {
            const centerX = 400, centerY = 260;
            
            // Tower structure
            ctx.fillStyle = '#D2A679';
            ctx.fillRect(centerX - 60, centerY - 80, 120, 160);
            
            // Tower outline
            ctx.strokeStyle = '#8B5A3C';
            ctx.lineWidth = 3;
            ctx.strokeRect(centerX - 60, centerY - 80, 120, 160);
            
            // Dome
            ctx.fillStyle = '#87CEEB';
            ctx.beginPath();
            ctx.arc(centerX, centerY - 80, 45, Math.PI, 0);
            ctx.fill();
            
            // Dome outline
            ctx.strokeStyle = '#4682B4';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY - 80, 45, Math.PI, 0);
            ctx.stroke();
            
            // Arches
            for (let i = 0; i < 3; i++) {
                ctx.strokeStyle = '#8B5A3C';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(centerX - 40 + i * 40, centerY - 20, 25, 0, Math.PI);
                ctx.stroke();
            }
            
            // Face
            drawFace(ctx, centerX, centerY + 30, true);
            
            // Sunglasses
            drawSunglasses(ctx, centerX, centerY + 20);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 100);
        }

        function drawJoshuaTree(ctx) {
            const centerX = 400, centerY = 300;
            
            // Trunk
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(centerX - 30, centerY - 20, 60, 100);
            ctx.strokeStyle = '#654321';
            ctx.lineWidth = 2;
            ctx.strokeRect(centerX - 30, centerY - 20, 60, 100);
            
            // Spiky branches
            ctx.fillStyle = '#228B22';
            ctx.strokeStyle = '#1a6b1a';
            ctx.lineWidth = 3;
            
            for (let i = 0; i < 8; i++) {
                const angle = (i * Math.PI) / 4;
                const tipX = centerX + Math.cos(angle) * 100;
                const tipY = centerY - 40 + Math.sin(angle) * 80;
                
                ctx.fillStyle = '#228B22';
                ctx.beginPath();
                ctx.arc(tipX, tipY, 18, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.strokeStyle = '#1a6b1a';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(tipX, tipY, 18, 0, Math.PI * 2);
                ctx.stroke();
            }
            
            // Face
            drawFace(ctx, centerX, centerY + 40, true);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 70);
        }

        function drawOrangeOC(ctx) {
            const centerX = 400, centerY = 280;
            
            // Orange body
            ctx.fillStyle = '#FFA500';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 80, 0, Math.PI * 2);
            ctx.fill();
            
            // Orange outline
            ctx.strokeStyle = '#FF8C00';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY, 80, 0, Math.PI * 2);
            ctx.stroke();
            
            // Orange texture lines
            ctx.strokeStyle = '#FF8C00';
            ctx.lineWidth = 1;
            for (let i = 0; i < 8; i++) {
                const angle = (i * Math.PI) / 4;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(centerX + Math.cos(angle) * 80, centerY + Math.sin(angle) * 80);
                ctx.stroke();
            }
            
            // Face
            drawFace(ctx, centerX, centerY + 5, true);
            
            // Sunglasses
            drawSunglasses(ctx, centerX, centerY - 10);
            
            // Surfboard
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(centerX - 100, centerY - 120, 30, 80);
            ctx.strokeStyle = '#4682B4';
            ctx.lineWidth = 2;
            ctx.strokeRect(centerX - 100, centerY - 120, 30, 80);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 100);
        }

        function drawVenturaPier(ctx) {
            const centerX = 400, centerY = 280;
            
            // Pier structure
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(centerX - 100, centerY - 40, 200, 80);
            ctx.strokeStyle = '#654321';
            ctx.lineWidth = 2;
            ctx.strokeRect(centerX - 100, centerY - 40, 200, 80);
            
            // Pier supports
            for (let i = 0; i < 5; i++) {
                ctx.fillStyle = '#654321';
                ctx.fillRect(centerX - 80 + i * 40, centerY + 40, 12, 60);
            }
            
            // Water
            ctx.fillStyle = '#4682B4';
            ctx.fillRect(centerX - 150, centerY + 100, 300, 80);
            ctx.strokeStyle = '#1C3A70';
            ctx.lineWidth = 1;
            for (let i = 0; i < 20; i++) {
                ctx.beginPath();
                ctx.moveTo(centerX - 150 + i * 20, centerY + 110);
                ctx.lineTo(centerX - 140 + i * 20, centerY + 115);
                ctx.stroke();
            }
            
            // Face on pier
            drawFace(ctx, centerX, centerY, true);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 80);
        }

        function drawOakland(ctx) {
            const centerX = 400, centerY = 280;
            
            // Trunk
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(centerX - 35, centerY + 20, 70, 100);
            ctx.strokeStyle = '#654321';
            ctx.lineWidth = 2;
            ctx.strokeRect(centerX - 35, centerY + 20, 70, 100);
            
            // Roots
            ctx.strokeStyle = '#654321';
            ctx.lineWidth = 3;
            for (let i = 0; i < 3; i++) {
                const angle = (Math.PI / 2) + (i - 1) * 0.3;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY + 20);
                ctx.quadraticCurveTo(
                    centerX + Math.cos(angle) * 40,
                    centerY + 40 + Math.sin(angle) * 60,
                    centerX + Math.cos(angle) * 50,
                    centerY + 120
                );
                ctx.stroke();
            }
            
            // Crown - large circle
            ctx.fillStyle = '#228B22';
            ctx.beginPath();
            ctx.arc(centerX, centerY - 40, 110, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = '#1a6b1a';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY - 40, 110, 0, Math.PI * 2);
            ctx.stroke();
            
            // Face
            drawFace(ctx, centerX, centerY + 60, true);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 120);
        }

        function drawDeltaKing(ctx) {
            const centerX = 400, centerY = 280;
            
            // Boat hull
            ctx.fillStyle = '#8B4513';
            ctx.beginPath();
            ctx.moveTo(centerX - 80, centerY);
            ctx.lineTo(centerX + 80, centerY);
            ctx.lineTo(centerX + 70, centerY + 60);
            ctx.lineTo(centerX - 70, centerY + 60);
            ctx.closePath();
            ctx.fill();
            
            ctx.strokeStyle = '#654321';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(centerX - 80, centerY);
            ctx.lineTo(centerX + 80, centerY);
            ctx.lineTo(centerX + 70, centerY + 60);
            ctx.lineTo(centerX - 70, centerY + 60);
            ctx.closePath();
            ctx.stroke();
            
            // Paddle wheel
            ctx.fillStyle = '#C0C0C0';
            ctx.beginPath();
            ctx.arc(centerX, centerY + 50, 35, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = '#808080';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(centerX, centerY + 50, 35, 0, Math.PI * 2);
            ctx.stroke();
            
            // Smokestack
            ctx.fillStyle = '#333333';
            ctx.fillRect(centerX - 15, centerY - 80, 30, 80);
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 2;
            ctx.strokeRect(centerX - 15, centerY - 80, 30, 80);
            
            // Face
            drawFace(ctx, centerX, centerY - 20, true);
            
            // Captain's hat
            ctx.fillStyle = '#000080';
            ctx.fillRect(centerX - 50, centerY - 100, 100, 30);
            ctx.beginPath();
            ctx.arc(centerX, centerY - 100, 55, Math.PI, 0);
            ctx.fill();
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 120);
        }

        function drawCapitolConnector(ctx) {
            const centerX = 400, centerY = 260;
            
            // Building base
            ctx.fillStyle = '#D2A679';
            ctx.fillRect(centerX - 70, centerY + 40, 140, 80);
            
            // Main dome body
            ctx.fillStyle = '#B8860B';
            ctx.fillRect(centerX - 60, centerY - 20, 120, 60);
            ctx.strokeStyle = '#8B5A3C';
            ctx.lineWidth = 2;
            ctx.strokeRect(centerX - 60, centerY - 20, 120, 60);
            
            // Dome
            ctx.fillStyle = '#FFD700';
            ctx.beginPath();
            ctx.arc(centerX, centerY - 20, 65, Math.PI, 0);
            ctx.fill();
            
            ctx.strokeStyle = '#B8860B';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY - 20, 65, Math.PI, 0);
            ctx.stroke();
            
            // Small tower on top
            ctx.fillStyle = '#8B5A3C';
            ctx.fillRect(centerX - 10, centerY - 100, 20, 80);
            
            // Arches on building
            for (let i = 0; i < 3; i++) {
                ctx.strokeStyle = '#8B5A3C';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(centerX - 40 + i * 40, centerY, 25, 0, Math.PI);
                ctx.stroke();
            }
            
            // Face
            drawFace(ctx, centerX, centerY + 20, true);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 110);
            
            // Banner
            ctx.fillStyle = '#F5DEB3';
            ctx.fillRect(centerX - 80, centerY + 120, 160, 30);
            ctx.strokeStyle = '#8B5A3C';
            ctx.lineWidth = 2;
            ctx.strokeRect(centerX - 80, centerY + 120, 160, 30);
        }

        function drawTahoeGold(ctx) {
            const centerX = 400, centerY = 280;
            
            // Gold nugget shape
            ctx.fillStyle = '#FFD700';
            ctx.beginPath();
            ctx.moveTo(centerX - 50, centerY);
            ctx.quadraticCurveTo(centerX - 70, centerY - 50, centerX - 40, centerY - 80);
            ctx.quadraticCurveTo(centerX, centerY - 90, centerX + 40, centerY - 80);
            ctx.quadraticCurveTo(centerX + 70, centerY - 50, centerX + 50, centerY);
            ctx.quadraticCurveTo(centerX + 60, centerY + 50, centerX, centerY + 80);
            ctx.quadraticCurveTo(centerX - 60, centerY + 50, centerX - 50, centerY);
            ctx.closePath();
            ctx.fill();
            
            ctx.strokeStyle = '#B8860B';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // Gold highlights
            ctx.fillStyle = '#FFFF99';
            ctx.fillRect(centerX - 30, centerY - 40, 30, 25);
            
            // Face
            drawFace(ctx, centerX, centerY + 20, true);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 100);
            
            // Snow around it
            ctx.fillStyle = '#E8F4F8';
            ctx.beginPath();
            ctx.arc(centerX - 100, centerY + 80, 30, 0, Math.PI * 2);
            ctx.arc(centerX + 100, centerY + 80, 30, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawCentralValleyGrapes(ctx) {
            const centerX = 400, centerY = 280;
            
            // Bunch of grapes
            ctx.fillStyle = '#800080';
            for (let row = 0; row < 6; row++) {
                const itemsInRow = 5 - Math.abs(row - 2.5);
                for (let col = 0; col < itemsInRow; col++) {
                    const x = centerX - 40 + col * 30 + (3 - itemsInRow) * 15;
                    const y = centerY - 80 + row * 25;
                    ctx.beginPath();
                    ctx.arc(x, y, 15, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.strokeStyle = '#660066';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }
            
            // Vine/stem
            ctx.strokeStyle = '#228B22';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(centerX + 40, centerY - 100);
            ctx.quadraticCurveTo(centerX + 60, centerY - 140, centerX + 30, centerY - 160);
            ctx.stroke();
            
            // Leaves
            ctx.fillStyle = '#228B22';
            ctx.beginPath();
            ctx.arc(centerX + 30, centerY - 160, 20, 0, Math.PI * 2);
            ctx.fill();
            
            // Face
            drawFace(ctx, centerX, centerY + 60, true);
            
            // Sunglasses
            drawSunglasses(ctx, centerX, centerY + 45);
            
            // Thumbs up hand
            drawThumbsUp(ctx, centerX + 80, centerY + 40);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 110);
        }

        function drawDiabloPeak(ctx) {
            const centerX = 400, centerY = 280;
            
            // Mountain
            ctx.fillStyle = '#8B4513';
            ctx.beginPath();
            ctx.moveTo(centerX, centerY - 100);
            ctx.lineTo(centerX + 120, centerY + 80);
            ctx.lineTo(centerX - 120, centerY + 80);
            ctx.closePath();
            ctx.fill();
            
            ctx.strokeStyle = '#654321';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY - 100);
            ctx.lineTo(centerX + 120, centerY + 80);
            ctx.lineTo(centerX - 120, centerY + 80);
            ctx.closePath();
            ctx.stroke();
            
            // Snow cap
            ctx.fillStyle = '#FFFFFF';
            ctx.beginPath();
            ctx.moveTo(centerX, centerY - 100);
            ctx.lineTo(centerX + 40, centerY - 20);
            ctx.lineTo(centerX - 40, centerY - 20);
            ctx.closePath();
            ctx.fill();
            
            // Ranger hat
            ctx.fillStyle = '#228B22';
            ctx.fillRect(centerX - 45, centerY - 120, 90, 25);
            ctx.beginPath();
            ctx.arc(centerX, centerY - 120, 50, Math.PI, 0);
            ctx.fill();
            
            // Face
            drawFace(ctx, centerX, centerY + 20, true);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 130);
        }

        function drawChicoBridge(ctx) {
            const centerX = 400, centerY = 280;
            
            // Covered bridge structure (red)
            ctx.fillStyle = '#CC3333';
            ctx.fillRect(centerX - 90, centerY - 60, 180, 100);
            
            // Covered bridge details
            ctx.strokeStyle = '#990000';
            ctx.lineWidth = 3;
            ctx.strokeRect(centerX - 90, centerY - 60, 180, 100);
            
            // Wood trusses
            ctx.strokeStyle = '#8B4513';
            ctx.lineWidth = 2;
            for (let i = 0; i < 4; i++) {
                const x = centerX - 70 + i * 45;
                ctx.beginPath();
                ctx.moveTo(x, centerY - 60);
                ctx.lineTo(x + 20, centerY + 40);
                ctx.moveTo(x + 20, centerY - 60);
                ctx.lineTo(x, centerY + 40);
                ctx.stroke();
            }
            
            // Roof
            ctx.fillStyle = '#999999';
            ctx.beginPath();
            ctx.moveTo(centerX - 90, centerY - 60);
            ctx.lineTo(centerX, centerY - 100);
            ctx.lineTo(centerX + 90, centerY - 60);
            ctx.closePath();
            ctx.fill();
            
            // Face
            drawFace(ctx, centerX, centerY, true);
            
            // Headset
            drawHeadsetOnMascot(ctx, centerX, centerY - 100);
        }

        function drawGenericMascot(ctx) {
            const centerX = 400, centerY = 280;
            
            ctx.fillStyle = '#4ECDC4';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 80, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = '#2C8C84';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY, 80, 0, Math.PI * 2);
            ctx.stroke();
            
            drawFace(ctx, centerX, centerY, true);
            drawHeadsetOnMascot(ctx, centerX, centerY - 100);
        }

        // Helper functions
        function drawFace(ctx, x, y, withSmile = true) {
            // Eyes
            ctx.fillStyle = '#FFFFFF';
            ctx.beginPath();
            ctx.arc(x - 25, y - 15, 18, 0, Math.PI * 2);
            ctx.arc(x + 25, y - 15, 18, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#000000';
            ctx.beginPath();
            ctx.arc(x - 25, y - 15, 10, 0, Math.PI * 2);
            ctx.arc(x + 25, y - 15, 10, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#FFFFFF';
            ctx.beginPath();
            ctx.arc(x - 22, y - 18, 4, 0, Math.PI * 2);
            ctx.arc(x + 28, y - 18, 4, 0, Math.PI * 2);
            ctx.fill();
            
            if (withSmile) {
                // Big smile
                ctx.strokeStyle = '#000000';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.arc(x, y + 10, 30, 0.2 * Math.PI, 0.8 * Math.PI);
                ctx.stroke();
                
                // Mouth fill
                ctx.fillStyle = '#FF6B9D';
                ctx.beginPath();
                ctx.arc(x, y + 10, 28, 0.2 * Math.PI, 0.8 * Math.PI);
                ctx.fill();
            }
        }

        function drawSunglasses(ctx, x, y) {
            // Left lens
            ctx.fillStyle = '#000000';
            ctx.fillRect(x - 45, y - 12, 30, 18);
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(x - 42, y - 10, 24, 14);
            ctx.strokeStyle = '#FFFFFF';
            ctx.lineWidth = 2;
            ctx.strokeRect(x - 42, y - 10, 24, 14);
            
            // Right lens
            ctx.fillStyle = '#000000';
            ctx.fillRect(x + 15, y - 12, 30, 18);
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(x + 18, y - 10, 24, 14);
            ctx.strokeStyle = '#FFFFFF';
            ctx.lineWidth = 2;
            ctx.strokeRect(x + 18, y - 10, 24, 14);
            
            // Bridge
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(x - 15, y - 3);
            ctx.lineTo(x + 15, y - 3);
            ctx.stroke();
        }

        function drawHeadsetOnMascot(ctx, x, y) {
            // Headset band
            ctx.strokeStyle = '#333333';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.arc(x, y, 80, 1.2 * Math.PI, 1.8 * Math.PI);
            ctx.stroke();
            
            // Left ear cup
            ctx.fillStyle = '#444444';
            ctx.beginPath();
            ctx.arc(x - 75, y - 20, 22, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = '#222222';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Right ear cup
            ctx.fillStyle = '#444444';
            ctx.beginPath();
            ctx.arc(x + 75, y - 20, 22, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = '#222222';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Microphone
            ctx.strokeStyle = '#333333';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(x - 60, y);
            ctx.quadraticCurveTo(x - 70, y + 30, x - 50, y + 50);
            ctx.stroke();
            
            ctx.fillStyle = '#555555';
            ctx.beginPath();
            ctx.arc(x - 50, y + 50, 10, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawThumbsUp(ctx, x, y) {
            // Hand/thumb
            ctx.fillStyle = '#F5DEB3';
            ctx.fillRect(x - 15, y, 30, 50);
            
            // Thumb
            ctx.fillStyle = '#F5DEB3';
            ctx.fillRect(x - 30, y - 20, 20, 40);
            
            ctx.strokeStyle = '#D2B48C';
            ctx.lineWidth = 2;
            ctx.strokeRect(x - 15, y, 30, 50);
            ctx.strokeRect(x - 30, y - 20, 20, 40);
        }

        function drawSparkles(ctx, x, y, count = 3) {
            for (let i = 0; i < count; i++) {
                const offsetX = (Math.random() - 0.5) * 100;
                const offsetY = (Math.random() - 0.5) * 100;
                drawFilledStar(ctx, x + offsetX, y + offsetY, 4, 12, 6, '#FFD700');
            }
        }

        function drawFilledStar(ctx, x, y, points, outerRadius, innerRadius, color) {
            ctx.fillStyle = color;
            ctx.beginPath();
            drawStarPath(ctx, x, y, points, outerRadius, innerRadius);
            ctx.fill();
        }

        function drawStarPath(ctx, x, y, points, outerRadius, innerRadius) {
            let angle = -Math.PI / 2;
            const angleStep = Math.PI / points;
            ctx.moveTo(x + Math.cos(angle) * outerRadius, y + Math.sin(angle) * outerRadius);
            
            for (let i = 0; i < points * 2; i++) {
                angle += angleStep;
                const radius = i % 2 === 0 ? outerRadius : innerRadius;
                ctx.lineTo(x + Math.cos(angle) * radius, y + Math.sin(angle) * radius);
            }
            ctx.closePath();
        }


        /**
         * Initiates the image generation process using the client-side generator.
         */
        async function generateImage(promptText, imgId, loaderId, buttonId) {
            clearMessage();
            const imgElement = document.getElementById(imgId);
            const loaderElement = document.getElementById(loaderId);
            const buttonElement = document.getElementById(buttonId);

            loaderElement.classList.remove('hidden');
            buttonElement.disabled = true;
            nextBtn.disabled = true;
            prevBtn.disabled = true;
            buttonElement.textContent = 'Generating...';
            downloadBtn.classList.add('hidden');
            imgElement.style.opacity = '0.5';

            try {
                // Simulate some delay for better UX
                await new Promise(resolve => setTimeout(resolve, 800));
                
                const mascotData = all211s[currentMascotIndex];
                const dataUrl = generateClientSideImage(mascotData);
                
                imgElement.src = dataUrl;
                downloadBtn.href = dataUrl;
                
                const mascotFileName = mascotData.mascotName.replace(/ /g, '_').toLowerCase();
                downloadBtn.download = `${mascotFileName}.png`;
                
                downloadBtn.classList.remove('hidden');
                showMessage('âœ¨ Generated using client-side Canvas generator', 'success');
            } catch (error) {
                showMessage('Generation failed: ' + error.message);
                imgElement.src = `https://placehold.co/400x300/b91c1c/f8fafc?text=Error`;
            } finally {
                loaderElement.classList.add('hidden');
                buttonElement.disabled = false;
                buttonElement.textContent = 'Generate';
                nextBtn.disabled = false;
                prevBtn.disabled = false;
                imgElement.style.opacity = '1';
            }
        }

        // --- Initialize the Page ---
        document.addEventListener('DOMContentLoaded', () => {
            loadMascot(currentMascotIndex); // Load the first mascot
            
            // --- Event Listeners ---
            generateBtn.addEventListener('click', startGeneration);
            nextBtn.addEventListener('click', nextMascot);
            prevBtn.addEventListener('click', prevMascot);
        });
        
    </script>
</body>
</html>
